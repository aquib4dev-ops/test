<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard ‚Äî SiteForge</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --black:   #080808;
      --dark:    #111111;
      --panel:   #161616;
      --border:  #252525;
      --gold:    #c9a84c;
      --gold-lt: #e8c96a;
      --cream:   #f0ece4;
      --muted:   #888880;
      --white:   #fafaf8;
      --green:   #4ade80;
      --blue:    #60a5fa;
      --red:     #f87171;
    }

    html { scroll-behavior: smooth; }

    body {
      background: var(--black);
      color: var(--cream);
      font-family: 'DM Sans', sans-serif;
      font-weight: 300;
      overflow-x: hidden;
      cursor: default;
    }

    /* ‚îÄ‚îÄ NOISE OVERLAY ‚îÄ‚îÄ */
    body::before {
      content: '';
      position: fixed; inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='1'/%3E%3C/svg%3E");
      opacity: .025; pointer-events: none; z-index: 1000;
    }

    /* ‚îÄ‚îÄ LOGIN SCREEN ‚îÄ‚îÄ */
    .login-screen {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
    }
    .login-box {
      background: var(--panel);
      border: 1px solid var(--border);
      padding: 60px;
      max-width: 480px;
      width: 100%;
      text-align: center;
    }
    .login-title {
      font-family: 'Playfair Display', serif;
      font-size: 2.4rem;
      font-weight: 900;
      color: var(--white);
      margin-bottom: 12px;
    }
    .login-subtitle {
      color: var(--muted);
      font-size: .9rem;
      margin-bottom: 40px;
      letter-spacing: .08em;
      text-transform: uppercase;
    }
    .login-input {
      width: 100%;
      background: var(--black);
      border: 1px solid var(--border);
      color: var(--cream);
      padding: 16px 20px;
      font-family: 'DM Sans', sans-serif;
      font-size: 1rem;
      margin-bottom: 24px;
      transition: border-color .3s;
      text-align: center;
      letter-spacing: .1em;
    }
    .login-input:focus {
      outline: none;
      border-color: var(--gold);
    }
    .login-btn {
      width: 100%;
      background: var(--gold);
      color: var(--black);
      padding: 16px;
      border: none;
      font-size: .88rem;
      letter-spacing: .1em;
      text-transform: uppercase;
      font-weight: 500;
      cursor: pointer;
      transition: all .25s;
      font-family: 'DM Sans', sans-serif;
    }
    .login-btn:hover {
      background: var(--gold-lt);
      transform: translateY(-2px);
    }
    .login-error {
      color: var(--red);
      font-size: .85rem;
      margin-top: 16px;
      display: none;
    }
    .login-hint {
      margin-top: 24px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      color: var(--muted);
      font-size: .8rem;
      line-height: 1.6;
    }

    /* ‚îÄ‚îÄ DASHBOARD LAYOUT ‚îÄ‚îÄ */
    .dashboard {
      display: none;
      min-height: 100vh;
      padding: 40px;
    }
    .dashboard.active {
      display: block;
    }

    /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
    .dash-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 48px;
      padding-bottom: 32px;
      border-bottom: 1px solid var(--border);
    }
    .dash-title-section h1 {
      font-family: 'Playfair Display', serif;
      font-size: 2.8rem;
      font-weight: 900;
      color: var(--white);
      margin-bottom: 8px;
    }
    .dash-subtitle {
      color: var(--muted);
      font-size: .85rem;
      letter-spacing: .08em;
      text-transform: uppercase;
    }
    .dash-actions {
      display: flex;
      gap: 12px;
    }
    .btn-logout {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
      padding: 12px 24px;
      font-size: .8rem;
      letter-spacing: .1em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all .25s;
      font-family: 'DM Sans', sans-serif;
    }
    .btn-logout:hover {
      border-color: var(--red);
      color: var(--red);
    }

    /* ‚îÄ‚îÄ STATS CARDS ‚îÄ‚îÄ */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 24px;
      margin-bottom: 48px;
    }
    .stat-card {
      background: var(--panel);
      border: 1px solid var(--border);
      padding: 28px;
      transition: border-color .3s;
    }
    .stat-card:hover {
      border-color: var(--gold);
    }
    .stat-label {
      font-size: .72rem;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 12px;
    }
    .stat-value {
      font-size: 2.4rem;
      font-weight: 600;
      color: var(--white);
      margin-bottom: 8px;
    }
    .stat-trend {
      font-size: .8rem;
      color: var(--green);
    }

    /* ‚îÄ‚îÄ FILTERS ‚îÄ‚îÄ */
    .filters {
      display: flex;
      gap: 16px;
      margin-bottom: 32px;
      flex-wrap: wrap;
    }
    .search-box {
      flex: 1;
      min-width: 280px;
      background: var(--panel);
      border: 1px solid var(--border);
      color: var(--cream);
      padding: 14px 18px;
      font-family: 'DM Sans', sans-serif;
      font-size: .9rem;
      transition: border-color .3s;
    }
    .search-box:focus {
      outline: none;
      border-color: var(--gold);
    }
    .filter-select {
      background: var(--panel);
      border: 1px solid var(--border);
      color: var(--cream);
      padding: 14px 18px;
      font-family: 'DM Sans', sans-serif;
      font-size: .9rem;
      cursor: pointer;
      transition: border-color .3s;
    }
    .filter-select:focus {
      outline: none;
      border-color: var(--gold);
    }
    .filter-select option {
      background: var(--panel);
      color: var(--cream);
    }

    /* ‚îÄ‚îÄ TABLE ‚îÄ‚îÄ */
    .table-wrapper {
      background: var(--panel);
      border: 1px solid var(--border);
      overflow-x: auto;
    }
    .orders-table {
      width: 100%;
      border-collapse: collapse;
    }
    .orders-table thead {
      background: var(--black);
      border-bottom: 1px solid var(--border);
    }
    .orders-table th {
      padding: 18px 20px;
      text-align: left;
      font-size: .72rem;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: var(--gold);
      font-weight: 500;
    }
    .orders-table td {
      padding: 20px;
      border-bottom: 1px solid var(--border);
      font-size: .9rem;
      color: var(--cream);
    }
    .orders-table tbody tr {
      transition: background .2s;
      cursor: pointer;
    }
    .orders-table tbody tr:hover {
      background: rgba(201,168,76,.05);
    }
    .order-id {
      font-family: 'Monaco', monospace;
      font-size: .8rem;
      color: var(--gold);
    }
    .status-badge {
      display: inline-block;
      padding: 6px 14px;
      font-size: .75rem;
      letter-spacing: .08em;
      text-transform: uppercase;
      font-weight: 500;
      border-radius: 2px;
    }
    .status-ordered {
      background: rgba(96, 165, 250, 0.15);
      color: var(--blue);
      border: 1px solid rgba(96, 165, 250, 0.3);
    }
    .status-in-progress {
      background: rgba(251, 191, 36, 0.15);
      color: #fbbf24;
      border: 1px solid rgba(251, 191, 36, 0.3);
    }
    .status-delivered {
      background: rgba(74, 222, 128, 0.15);
      color: var(--green);
      border: 1px solid rgba(74, 222, 128, 0.3);
    }
    .table-actions {
      display: flex;
      gap: 8px;
    }
    .btn-icon {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all .2s;
      font-size: .85rem;
    }
    .btn-icon:hover {
      border-color: var(--gold);
      color: var(--gold);
    }
    .btn-icon.delete:hover {
      border-color: var(--red);
      color: var(--red);
    }

    /* ‚îÄ‚îÄ DETAIL MODAL ‚îÄ‚îÄ */
    .detail-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.8);
      backdrop-filter: blur(4px);
      z-index: 9998;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 40px;
    }
    .detail-overlay.active {
      display: flex;
    }
    .detail-modal {
      background: var(--panel);
      border: 1px solid var(--border);
      max-width: 720px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }
    .detail-header {
      padding: 40px;
      border-bottom: 1px solid var(--border);
      background: var(--black);
    }
    .detail-header h2 {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 8px;
    }
    .detail-close {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 36px;
      height: 36px;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      transition: all .25s;
    }
    .detail-close:hover {
      border-color: var(--gold);
      color: var(--gold);
      transform: rotate(90deg);
    }
    .detail-body {
      padding: 40px;
    }
    .detail-section {
      margin-bottom: 32px;
    }
    .detail-section h3 {
      font-size: .75rem;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 16px;
    }
    .detail-row {
      display: flex;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }
    .detail-row:last-child {
      border-bottom: none;
    }
    .detail-label {
      flex: 0 0 160px;
      color: var(--muted);
      font-size: .85rem;
    }
    .detail-value {
      flex: 1;
      color: var(--cream);
      font-size: .9rem;
    }
    .detail-description {
      background: var(--black);
      padding: 20px;
      border: 1px solid var(--border);
      color: var(--cream);
      line-height: 1.7;
      font-size: .9rem;
    }
    .status-select {
      width: 100%;
      background: var(--black);
      border: 1px solid var(--border);
      color: var(--cream);
      padding: 12px 16px;
      font-family: 'DM Sans', sans-serif;
      font-size: .9rem;
      cursor: pointer;
      margin-bottom: 16px;
    }
    .status-select option {
      background: var(--black);
      color: var(--cream);
    }
    .btn-save {
      background: var(--gold);
      color: var(--black);
      padding: 14px 32px;
      border: none;
      font-size: .85rem;
      letter-spacing: .1em;
      text-transform: uppercase;
      font-weight: 500;
      cursor: pointer;
      transition: all .25s;
      font-family: 'DM Sans', sans-serif;
      width: 100%;
    }
    .btn-save:hover {
      background: var(--gold-lt);
      transform: translateY(-2px);
    }

    /* ‚îÄ‚îÄ EMPTY STATE ‚îÄ‚îÄ */
    .empty-state {
      text-align: center;
      padding: 80px 40px;
      color: var(--muted);
    }
    .empty-state-icon {
      font-size: 4rem;
      margin-bottom: 24px;
      opacity: .3;
    }
    .empty-state h3 {
      font-size: 1.4rem;
      color: var(--cream);
      margin-bottom: 12px;
    }

    /* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
    @media (max-width: 900px) {
      .dashboard { padding: 24px; }
      .dash-header { flex-direction: column; gap: 24px; align-items: flex-start; }
      .stats-grid { grid-template-columns: 1fr; }
      .filters { flex-direction: column; }
      .search-box { min-width: 100%; }
      .table-wrapper { overflow-x: scroll; }
      .detail-modal { margin: 20px; }
      .detail-header { padding: 28px; }
      .detail-body { padding: 28px; }
    }
  </style>
</head>
<body>
  <!-- LOGIN SCREEN -->
  <div class="login-screen" id="loginScreen">
    <div class="login-box">
      <h1 class="login-title">Admin Access</h1>
      <p class="login-subtitle">SiteForge Dashboard</p>
      
      <input 
        type="password" 
        class="login-input" 
        id="passwordInput" 
        placeholder="Enter password"
        autocomplete="current-password"
      />
      
      <button class="login-btn" id="loginBtn">Access Dashboard</button>
      
      <div class="login-error" id="loginError">
        ‚ùå Incorrect password. Please try again.
      </div>
      
      <div class="login-hint">
        üí° <strong>Demo Password:</strong> admin123<br>
        (You can change this in the code)
      </div>
    </div>
  </div>

  <!-- DASHBOARD -->
  <div class="dashboard" id="dashboard">
    <!-- Header -->
    <div class="dash-header">
      <div class="dash-title-section">
        <h1>Orders Dashboard</h1>
        <p class="dash-subtitle">Manage all website orders</p>
      </div>
      <div class="dash-actions">
        <button class="btn-logout" id="logoutBtn">Logout</button>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-label">Total Orders</div>
        <div class="stat-value" id="statTotal">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">New Orders</div>
        <div class="stat-value" id="statOrdered">0</div>
        <div class="stat-trend">‚óè Awaiting action</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">In Progress</div>
        <div class="stat-value" id="statInProgress">0</div>
        <div class="stat-trend">‚óè Building sites</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Delivered</div>
        <div class="stat-value" id="statDelivered">0</div>
        <div class="stat-trend">‚úì Completed</div>
      </div>
    </div>

    <!-- Filters -->
    <div class="filters">
      <input 
        type="text" 
        class="search-box" 
        id="searchBox" 
        placeholder="Search by business name, email, or order ID..."
      />
      <select class="filter-select" id="statusFilter">
        <option value="all">All Statuses</option>
        <option value="ordered">Ordered</option>
        <option value="in-progress">In Progress</option>
        <option value="delivered">Delivered</option>
      </select>
      <select class="filter-select" id="industryFilter">
        <option value="all">All Industries</option>
        <option value="ecommerce">E-commerce</option>
        <option value="restaurant">Restaurant</option>
        <option value="services">Services</option>
        <option value="health">Health</option>
        <option value="tech">Technology</option>
        <option value="realestate">Real Estate</option>
        <option value="creative">Creative</option>
        <option value="education">Education</option>
        <option value="nonprofit">Nonprofit</option>
        <option value="other">Other</option>
      </select>
    </div>

    <!-- Orders Table -->
    <div class="table-wrapper">
      <table class="orders-table">
        <thead>
          <tr>
            <th>Order ID</th>
            <th>Business</th>
            <th>Contact</th>
            <th>Industry</th>
            <th>Status</th>
            <th>Order Date</th>
            <th>Delivery</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="ordersTableBody">
          <!-- Orders will be inserted here -->
        </tbody>
      </table>
      
      <!-- Empty State -->
      <div class="empty-state" id="emptyState" style="display: none;">
        <div class="empty-state-icon">üì¶</div>
        <h3>No orders yet</h3>
        <p>Orders will appear here once customers start submitting them.</p>
      </div>
    </div>
  </div>

  <!-- DETAIL MODAL -->
  <div class="detail-overlay" id="detailOverlay">
    <div class="detail-modal">
      <div class="detail-header">
        <h2 id="detailTitle">Order Details</h2>
        <button class="detail-close" id="detailClose">√ó</button>
      </div>
      <div class="detail-body" id="detailBody">
        <!-- Details will be inserted here -->
      </div>
    </div>
  </div>

  <script>
    // ‚îÄ‚îÄ‚îÄ AUTHENTICATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // JavaScript Lesson: Simple password-based authentication using localStorage
    
    const ADMIN_PASSWORD = 'admin123'; // Change this to your desired password
    const loginScreen = document.getElementById('loginScreen');
    const dashboard = document.getElementById('dashboard');
    const passwordInput = document.getElementById('passwordInput');
    const loginBtn = document.getElementById('loginBtn');
    const loginError = document.getElementById('loginError');
    const logoutBtn = document.getElementById('logoutBtn');

    // Check if already logged in
    function checkAuth() {
      const isLoggedIn = sessionStorage.getItem('admin_logged_in');
      if (isLoggedIn === 'true') {
        showDashboard();
      }
    }

    // Login function
    function login() {
      const password = passwordInput.value;
      
      if (password === ADMIN_PASSWORD) {
        // Correct password
        sessionStorage.setItem('admin_logged_in', 'true');
        loginError.style.display = 'none';
        showDashboard();
      } else {
        // Wrong password
        loginError.style.display = 'block';
        passwordInput.value = '';
        passwordInput.focus();
      }
    }

    // Show dashboard
    function showDashboard() {
      loginScreen.style.display = 'none';
      dashboard.classList.add('active');
      loadOrders();
    }

    // Logout function
    function logout() {
      sessionStorage.removeItem('admin_logged_in');
      dashboard.classList.remove('active');
      loginScreen.style.display = 'flex';
      passwordInput.value = '';
    }

    // Event listeners
    loginBtn.addEventListener('click', login);
    passwordInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') login();
    });
    logoutBtn.addEventListener('click', logout);

    // Check auth on page load
    checkAuth();

    // ‚îÄ‚îÄ‚îÄ LOAD AND DISPLAY ORDERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    let allOrders = [];

    function loadOrders() {
      // Get orders from localStorage
      const ordersData = localStorage.getItem('siteforge_orders');
      allOrders = ordersData ? JSON.parse(ordersData) : [];
      
      updateStats();
      renderOrders(allOrders);
    }

    function updateStats() {
      const total = allOrders.length;
      const ordered = allOrders.filter(o => o.status === 'ordered').length;
      const inProgress = allOrders.filter(o => o.status === 'in-progress').length;
      const delivered = allOrders.filter(o => o.status === 'delivered').length;

      document.getElementById('statTotal').textContent = total;
      document.getElementById('statOrdered').textContent = ordered;
      document.getElementById('statInProgress').textContent = inProgress;
      document.getElementById('statDelivered').textContent = delivered;
    }

    function renderOrders(orders) {
      const tbody = document.getElementById('ordersTableBody');
      const emptyState = document.getElementById('emptyState');
      
      if (orders.length === 0) {
        tbody.innerHTML = '';
        emptyState.style.display = 'block';
        return;
      }

      emptyState.style.display = 'none';
      
      tbody.innerHTML = orders.map(order => {
        const orderDate = new Date(order.orderDate).toLocaleDateString('en-US', {
          month: 'short',
          day: 'numeric',
          year: 'numeric'
        });
        
        const deliveryDate = new Date(order.estimatedDelivery).toLocaleDateString('en-US', {
          month: 'short',
          day: 'numeric'
        });

        const statusClass = order.status === 'ordered' ? 'status-ordered' : 
                           order.status === 'in-progress' ? 'status-in-progress' : 
                           'status-delivered';
        
        const statusText = order.status === 'ordered' ? 'Ordered' :
                          order.status === 'in-progress' ? 'In Progress' :
                          'Delivered';

        return `
          <tr onclick="viewOrderDetails('${order.id}')">
            <td><span class="order-id">${order.id}</span></td>
            <td>${order.businessName}</td>
            <td>${order.email}</td>
            <td>${capitalizeFirst(order.industry)}</td>
            <td><span class="status-badge ${statusClass}">${statusText}</span></td>
            <td>${orderDate}</td>
            <td>${deliveryDate}</td>
            <td>
              <div class="table-actions" onclick="event.stopPropagation()">
                <button class="btn-icon" onclick="viewOrderDetails('${order.id}')" title="View Details">
                  üëÅÔ∏è
                </button>
                <button class="btn-icon delete" onclick="deleteOrder('${order.id}')" title="Delete Order">
                  üóëÔ∏è
                </button>
              </div>
            </td>
          </tr>
        `;
      }).join('');
    }

    function capitalizeFirst(str) {
      return str.charAt(0).toUpperCase() + str.slice(1);
    }

    // ‚îÄ‚îÄ‚îÄ FILTERING & SEARCH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const searchBox = document.getElementById('searchBox');
    const statusFilter = document.getElementById('statusFilter');
    const industryFilter = document.getElementById('industryFilter');

    function filterOrders() {
      const searchTerm = searchBox.value.toLowerCase();
      const statusValue = statusFilter.value;
      const industryValue = industryFilter.value;

      let filtered = allOrders;

      // Filter by search
      if (searchTerm) {
        filtered = filtered.filter(order => 
          order.businessName.toLowerCase().includes(searchTerm) ||
          order.email.toLowerCase().includes(searchTerm) ||
          order.id.toLowerCase().includes(searchTerm) ||
          order.fullName.toLowerCase().includes(searchTerm)
        );
      }

      // Filter by status
      if (statusValue !== 'all') {
        filtered = filtered.filter(order => order.status === statusValue);
      }

      // Filter by industry
      if (industryValue !== 'all') {
        filtered = filtered.filter(order => order.industry === industryValue);
      }

      renderOrders(filtered);
    }

    searchBox.addEventListener('input', filterOrders);
    statusFilter.addEventListener('change', filterOrders);
    industryFilter.addEventListener('change', filterOrders);

    // ‚îÄ‚îÄ‚îÄ ORDER DETAILS MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const detailOverlay = document.getElementById('detailOverlay');
    const detailClose = document.getElementById('detailClose');
    let currentOrderId = null;

    function viewOrderDetails(orderId) {
      const order = allOrders.find(o => o.id === orderId);
      if (!order) return;

      currentOrderId = orderId;
      
      const orderDate = new Date(order.orderDate).toLocaleDateString('en-US', {
        month: 'long',
        day: 'numeric',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });

      const deliveryDate = new Date(order.estimatedDelivery).toLocaleDateString('en-US', {
        month: 'long',
        day: 'numeric',
        year: 'numeric'
      });

      document.getElementById('detailTitle').textContent = order.businessName;
      
      const featuresHTML = order.features && order.features.length > 0
        ? order.features.map(f => `<span style="color: var(--gold)">‚úì</span> ${capitalizeFirst(f.replace('-', ' '))}`).join('<br>')
        : '<span style="color: var(--muted)">No features selected</span>';

      document.getElementById('detailBody').innerHTML = `
        <div class="detail-section">
          <h3>Business Information</h3>
          <div class="detail-row">
            <span class="detail-label">Order ID</span>
            <span class="detail-value order-id">${order.id}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Business Name</span>
            <span class="detail-value">${order.businessName}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Industry</span>
            <span class="detail-value">${capitalizeFirst(order.industry)}</span>
          </div>
          ${order.currentWebsite ? `
          <div class="detail-row">
            <span class="detail-label">Current Website</span>
            <span class="detail-value"><a href="${order.currentWebsite}" target="_blank" style="color: var(--gold)">${order.currentWebsite}</a></span>
          </div>
          ` : ''}
        </div>

        <div class="detail-section">
          <h3>Contact Information</h3>
          <div class="detail-row">
            <span class="detail-label">Full Name</span>
            <span class="detail-value">${order.fullName}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Email</span>
            <span class="detail-value">${order.email}</span>
          </div>
          ${order.phone ? `
          <div class="detail-row">
            <span class="detail-label">Phone</span>
            <span class="detail-value">${order.phone}</span>
          </div>
          ` : ''}
        </div>

        <div class="detail-section">
          <h3>Website Requirements</h3>
          <div class="detail-row">
            <span class="detail-label">Features Needed</span>
            <span class="detail-value">${featuresHTML}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Timeline</span>
            <span class="detail-value">${capitalizeFirst(order.timeline)}</span>
          </div>
        </div>

        <div class="detail-section">
          <h3>Description</h3>
          <div class="detail-description">${order.description}</div>
        </div>

        <div class="detail-section">
          <h3>Order Timeline</h3>
          <div class="detail-row">
            <span class="detail-label">Order Date</span>
            <span class="detail-value">${orderDate}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Est. Delivery</span>
            <span class="detail-value">${deliveryDate}</span>
          </div>
        </div>

        ${order.generatedWebsite ? `
        <div class="detail-section">
          <h3>ü§ñ Generated Website</h3>
          <div class="detail-row">
            <span class="detail-label">Generated</span>
            <span class="detail-value">${new Date(order.websiteGeneratedAt).toLocaleString()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Status</span>
            <span class="detail-value" style="color: var(--green)">‚úì Ready</span>
          </div>
          <div style="display: flex; gap: 12px; margin-top: 1.5rem;">
            <button class="btn-save" onclick="previewWebsite('${order.id}')" style="flex: 1;">
              üëÅÔ∏è Preview
            </button>
            <button class="btn-save" onclick="downloadWebsite('${order.id}')" style="flex: 1; background: var(--blue);">
              ‚¨áÔ∏è Download
            </button>
            <button class="btn-save" onclick="emailWebsite('${order.id}')" style="flex: 1; background: var(--green);">
              ‚úâÔ∏è Email
            </button>
          </div>
        </div>
        ` : `
        <div class="detail-section">
          <h3>ü§ñ Generated Website</h3>
          <p style="color: var(--muted); text-align: center; padding: 2rem;">
            ‚è≥ Website is being generated...<br>
            <small>This usually takes 1-2 seconds</small>
          </p>
        </div>
        `}

        <div class="detail-section">
          <h3>Update Status</h3>
          <select class="status-select" id="orderStatus">
            <option value="ordered" ${order.status === 'ordered' ? 'selected' : ''}>Ordered</option>
            <option value="in-progress" ${order.status === 'in-progress' ? 'selected' : ''}>In Progress</option>
            <option value="delivered" ${order.status === 'delivered' ? 'selected' : ''}>Delivered</option>
          </select>
          <button class="btn-save" onclick="updateOrderStatus()">Save Status</button>
        </div>
      `;

      detailOverlay.classList.add('active');
    }

    function closeDetailModal() {
      detailOverlay.classList.remove('active');
      currentOrderId = null;
    }

    detailClose.addEventListener('click', closeDetailModal);
    detailOverlay.addEventListener('click', (e) => {
      if (e.target === detailOverlay) closeDetailModal();
    });

    // ‚îÄ‚îÄ‚îÄ UPDATE ORDER STATUS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function updateOrderStatus() {
      if (!currentOrderId) return;

      const newStatus = document.getElementById('orderStatus').value;
      
      // Find and update the order
      const orderIndex = allOrders.findIndex(o => o.id === currentOrderId);
      if (orderIndex !== -1) {
        allOrders[orderIndex].status = newStatus;
        
        // Save back to localStorage
        localStorage.setItem('siteforge_orders', JSON.stringify(allOrders));
        
        // Refresh display
        loadOrders();
        closeDetailModal();
        
        console.log('‚úÖ Order status updated:', currentOrderId, '‚Üí', newStatus);
      }
    }

    // ‚îÄ‚îÄ‚îÄ DELETE ORDER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function deleteOrder(orderId) {
      if (!confirm('Are you sure you want to delete this order? This action cannot be undone.')) {
        return;
      }

      // Remove order from array
      allOrders = allOrders.filter(o => o.id !== orderId);
      
      // Save back to localStorage
      localStorage.setItem('siteforge_orders', JSON.stringify(allOrders));
      
      // Refresh display
      loadOrders();
      
      console.log('üóëÔ∏è Order deleted:', orderId);
    }

    // Make functions globally available
    window.viewOrderDetails = viewOrderDetails;
    window.updateOrderStatus = updateOrderStatus;
    window.deleteOrder = deleteOrder;
    window.previewWebsite = previewWebsite;
    window.downloadWebsite = downloadWebsite;
    window.emailWebsite = emailWebsite;

    // ‚îÄ‚îÄ‚îÄ PREVIEW GENERATED WEBSITE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function previewWebsite(orderId) {
      const order = allOrders.find(o => o.id === orderId);
      if (!order || !order.generatedWebsite) {
        alert('Website not generated yet');
        return;
      }

      // Open preview in new window
      const previewWindow = window.open('', '_blank');
      previewWindow.document.write(order.generatedWebsite.html);
      previewWindow.document.close();
      
      console.log('üëÅÔ∏è Preview opened for:', order.businessName);
    }

    // ‚îÄ‚îÄ‚îÄ DOWNLOAD GENERATED WEBSITE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function downloadWebsite(orderId) {
      const order = allOrders.find(o => o.id === orderId);
      if (!order || !order.generatedWebsite) {
        alert('Website not generated yet');
        return;
      }

      // Create download link
      const blob = new Blob([order.generatedWebsite.html], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${order.businessName.replace(/\s+/g, '-').toLowerCase()}-website.html`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      console.log('‚¨áÔ∏è Downloaded website for:', order.businessName);
    }

    // ‚îÄ‚îÄ‚îÄ EMAIL WEBSITE TO CLIENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function emailWebsite(orderId) {
      const order = allOrders.find(o => o.id === orderId);
      if (!order || !order.generatedWebsite) {
        alert('Website not generated yet');
        return;
      }

      // Create email preview modal
      const emailHTML = `
        <div style="background: white; padding: 3rem; border-radius: 10px; max-width: 700px; margin: 2rem auto;">
          <h2 style="color: #2D3436; margin-bottom: 1.5rem;">üìß Email Preview</h2>
          
          <div style="background: #F5F6FA; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid var(--gold);">
            <p style="margin: 0 0 1rem 0;"><strong>To:</strong> ${order.email}</p>
            <p style="margin: 0 0 1rem 0;"><strong>From:</strong> SiteForge Team</p>
            <p style="margin: 0;"><strong>Subject:</strong> Your Website is Ready! üéâ</p>
          </div>

          <div style="background: white; border: 1px solid #ddd; padding: 2rem; border-radius: 8px; margin-bottom: 2rem;">
            <p style="margin: 0 0 1rem 0;">Hi ${order.fullName},</p>
            <p style="margin: 0 0 1rem 0;">Great news! Your website for <strong>${order.businessName}</strong> is complete and ready to launch.</p>
            <p style="margin: 0 0 1rem 0;">We've crafted a beautiful, fully responsive website based on your requirements. It includes all the features you requested and is ready to go live.</p>
            <p style="margin: 0 0 1.5rem 0;"><strong>What's next?</strong></p>
            <ol style="margin: 0 0 1.5rem 2rem; line-height: 1.8;">
              <li>Download your website files (attached)</li>
              <li>Review and test on different devices</li>
              <li>Let us know if you need any adjustments</li>
              <li>Launch when you're ready!</li>
            </ol>
            <p style="margin: 0 0 1rem 0;">Need help with hosting or have questions? Just reply to this email.</p>
            <p style="margin: 1.5rem 0 0 0;">
              Best regards,<br>
              <strong>The SiteForge Team</strong>
            </p>
          </div>

          <div style="display: flex; gap: 1rem;">
            <button onclick="sendEmail('${orderId}')" style="flex: 1; background: var(--green); color: white; border: none; padding: 1rem; border-radius: 8px; font-weight: 600; cursor: pointer;">
              ‚úì Send Email
            </button>
            <button onclick="closeEmailPreview()" style="flex: 1; background: #ddd; color: #333; border: none; padding: 1rem; border-radius: 8px; font-weight: 600; cursor: pointer;">
              Cancel
            </button>
          </div>
        </div>
      `;

      // Show email preview overlay
      const overlay = document.createElement('div');
      overlay.id = 'emailPreview';
      overlay.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(4px); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 2rem; overflow-y: auto;';
      overlay.innerHTML = emailHTML;
      document.body.appendChild(overlay);

      // Close on overlay click
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) closeEmailPreview();
      });

      console.log('‚úâÔ∏è Email preview opened for:', order.businessName);
    }

    function sendEmail(orderId) {
      // In a real app, this would call your backend API to send email
      // For now, we simulate it
      
      const order = allOrders.find(o => o.id === orderId);
      
      alert(`üìß Email sent to ${order.email}!\n\n(This is a simulation - in production, this would send a real email with the website attached)`);
      
      // Update order status to delivered
      const orderIndex = allOrders.findIndex(o => o.id === orderId);
      if (orderIndex !== -1) {
        allOrders[orderIndex].status = 'delivered';
        allOrders[orderIndex].deliveredAt = new Date().toISOString();
        localStorage.setItem('siteforge_orders', JSON.stringify(allOrders));
        
        loadOrders();
      }

      closeEmailPreview();
      closeDetailModal();

      console.log('‚úÖ Email sent and order marked as delivered');
    }

    function closeEmailPreview() {
      const preview = document.getElementById('emailPreview');
      if (preview) {
        preview.remove();
      }
    }

    window.sendEmail = sendEmail;
    window.closeEmailPreview = closeEmailPreview;

    // ‚îÄ‚îÄ‚îÄ AUTO-REFRESH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // Reload orders every 30 seconds to catch new submissions
    setInterval(() => {
      if (sessionStorage.getItem('admin_logged_in') === 'true') {
        loadOrders();
      }
    }, 30000);

  </script>
</body>
</html>
